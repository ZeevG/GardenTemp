"use strict";angular.module("gardenTempApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","googlechart"]).config(function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}).value("googleChartApiConfig",{version:"1.1",optionalSettings:{packages:["line","bar"],language:"en"}}),angular.module("gardenTempApp").controller("MainCtrl",["$scope","$http","googleChartApiPromise","$timeout",function(a,b,c,d){function e(){b.get(h).success(function(b){c.then(function(){a.chartObject={},a.chartObject.data=g(b),a.chartObject.type=i,a.chartObject.options=j})}).error(function(){console.log("problemo!")})}function f(a,b,c){var d=b-Number(c/2);0>d&&(d=0);var e=b+Number(c/2);e>=a.length&&(e=a.length-1);for(var f=0,g=0,h=e-d,i=0;h>i;i++)f+=Number(a[d+i].temp),g+=Number(a[d+i].humidity);return{temp:f/h,humidity:g/h}}function g(a){for(var b={cols:[{id:"t",label:"Time",type:"datetime"},{id:"s",label:"Temperature",type:"number"},{id:"h",label:"Humidity",type:"number"}],rows:[]},c=0;c<a.length;c++){var d=f(a,c,30),e=[{v:new Date(a[c].timestamp)},{v:Number(d.temp).toFixed(2)},{v:Number(d.humidity).toFixed(2)}];b.rows.unshift({c:e}),c+=10}return b}var h="https://data.sparkfun.com/output/bGb7w7O557Ip18wAnXog.json?limit=10080",i="LineChart",j={title:"Garden Temperature",displayExactValues:!0,vAxis:[{title:"Humidity",gridlines:{count:10},maxValue:100},{title:"Temperature",gridlines:{count:10}}],hAxis:{title:"Date Time"},series:{0:{targetAxisIndex:1},1:{targetAxisIndex:0,color:"#808080",lineWidth:1}},legend:{position:"bottom"},animation:{startup:!0,duration:5},explorer:{},width:700,height:400};e(),d(e,12e4)}]);